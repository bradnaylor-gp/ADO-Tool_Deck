<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title|default('Presentation') }}</title>
    
    <!-- Favicon -->
    {% if favicon %}
    <link rel="icon" type="image/png" href="{{ favicon }}">
    {% endif %}
    
    <!-- Google Fonts - IBM Plex Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    
    <!-- Reveal.js CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.min.css">
    
    <!-- Core CSS -->
    <link rel="stylesheet" href="/static/css/base/reset.css">
    <link rel="stylesheet" href="/static/css/base/reveal-overrides.css">
    
    <!-- Theme -->
    {% if theme %}
    <link rel="stylesheet" href="/static/css/themes/{{ theme }}.css">
    {% else %}
    <link rel="stylesheet" href="/static/css/themes/default.css">
    {% endif %}
    
    <!-- Components -->
    <link rel="stylesheet" href="/static/css/components/components.css">
    
    <!-- Custom CSS -->
    {% block custom_css %}{% endblock %}
</head>
<body>
    <div class="reveal">
        <div class="slides">
            {% block slides %}{% endblock %}
        </div>
    </div>

    <!-- Reveal.js Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/notes/notes.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/markdown/markdown.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/highlight/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/zoom/zoom.min.js"></script>

    <!-- Initialize Reveal.js -->
    <script>
        const revealConfig = {
            hash: true,
            controls: true,
            progress: true,
            center: {{ center|default('true') }},
            transition: '{{ transition|default('slide') }}',
            slideNumber: '{{ slide_number|default('c/t') }}',
            showSlideNumber: '{{ show_slide_number|default('all') }}',
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
        };

        {% if config %}
        // Merge additional configuration
        Object.assign(revealConfig, {{ config|safe }});
        {% endif %}

        // Initialize Reveal.js with the configuration
        Reveal.initialize(revealConfig);
    </script>

    {% block custom_js %}{% endblock %}
</body>
</html>
